{% load static %}


<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Edit_Event | EventX</title>

    {% include "links.html" %}
  </head>
  <body class="max-w-[1400px] mx-auto bg-gray-50">
    {% include "header.html" %}

    <main class="max-w-[1100px] mx-auto">
      <div class="grid grid-cols-1 md:grid-cols-12 gap-7">
        <!-- Left side: image, name etc -->
        <div class="md:col-span-7 my-10 ml-5">
          <img
            src="{% static 'images/event.jpeg' %}"
            alt="Event image"
            class="rounded-lg w-full h-[300px] object-cover"
          />

          <h2 class="font-semibold text-2xl my-3">{{events.name}}</h2>

          <p class="p-2 my-2">
            {{events.description}}
          </p>

          <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-6 text-sm mb-5">
            <!-- Event Date -->
            <div
              class="bg-gray-100 rounded-lg p-4 shadow-sm hover:shadow-md transition"
              >
              <div
                class="flex justify-center items-center gap-2 text-white bg-gradient-to-r from-orange-400 to-orange-600 rounded-md px-3 py-1 mb-2"
                >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke-width="1.8"
                  stroke="currentColor"
                  class="w-5 h-5"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"
                  />
                </svg>
                <span class="font-medium">Event Date</span>
              </div>

              <div
                class="flex justify-center items-center gap-1 text-center font-medium text-gray-700"
              >
              {{ events.date|date:"d" }}, {{ events.date|date:"M" }}
              </div>
            </div>

            <!-- Time -->
            <div
              class="bg-gray-100 rounded-lg p-4 shadow-sm hover:shadow-md transition"
              >
              <div
                class="flex justify-center items-center gap-2 text-white bg-gradient-to-r from-orange-400 to-orange-600 rounded-md px-3 py-1 mb-2"
                >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  viewBox="0 0 24 24"
                  fill="currentColor"
                  class="w-5 h-5"
                >
                  <path
                    fill-rule="evenodd"
                    d="M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25ZM12.75 6a.75.75 0 0 0-1.5 0v6c0 .414.336.75.75.75h4.5a.75.75 0 0 0 0-1.5h-3.75V6Z"
                    clip-rule="evenodd"
                  />
                </svg>
                <span class="font-medium">Time</span>
              </div>

              <div
                class="flex justify-center items-center gap-1 text-center font-medium text-gray-700"
              >
              {{ events.time }}
              <p>-</p>
              {{ events.time }}
              </div>
            </div>

            <!-- Seat Left -->
            <div
              class="bg-gray-100 rounded-lg p-4 shadow-sm hover:shadow-md transition"
              >
              <div
                class="flex justify-center items-center gap-2 text-white bg-gradient-to-r from-orange-400 to-orange-600 rounded-md px-3 py-1 mb-2"
                >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  viewBox="0 0 24 24"
                  fill="currentColor"
                  class="size-4"
                >
                  <path
                    fill-rule="evenodd"
                    d="M1.5 6.375c0-1.036.84-1.875 1.875-1.875h17.25c1.035 0 1.875.84 1.875 1.875v3.026a.75.75 0 0 1-.375.65 2.249 2.249 0 0 0 0 3.898.75.75 0 0 1 .375.65v3.026c0 1.035-.84 1.875-1.875 1.875H3.375A1.875 1.875 0 0 1 1.5 17.625v-3.026a.75.75 0 0 1 .374-.65 2.249 2.249 0 0 0 0-3.898.75.75 0 0 1-.374-.65V6.375Zm15-1.125a.75.75 0 0 1 .75.75v.75a.75.75 0 0 1-1.5 0V6a.75.75 0 0 1 .75-.75Zm.75 4.5a.75.75 0 0 0-1.5 0v.75a.75.75 0 0 0 1.5 0v-.75Zm-.75 3a.75.75 0 0 1 .75.75v.75a.75.75 0 0 1-1.5 0v-.75a.75.75 0 0 1 .75-.75Zm.75 4.5a.75.75 0 0 0-1.5 0V18a.75.75 0 0 0 1.5 0v-.75ZM6 12a.75.75 0 0 1 .75-.75H12a.75.75 0 0 1 0 1.5H6.75A.75.75 0 0 1 6 12Zm.75 2.25a.75.75 0 0 0 0 1.5h3a.75.75 0 0 0 0-1.5h-3Z"
                    clip-rule="evenodd"
                  />
                </svg>
                <p>Seats Left</p>
              </div>

              <div class="text-center font-medium text-gray-700">{{events.available_seats}}</div>
            </div>
          </div>

          <div class="grid grid-cols-1 md:grid-cols-5 gap-4 mt-6 text-sm mb-5">
            <!-- Location -->
            <div
              class="col-span-3 bg-gray-100 rounded-lg p-4 shadow-sm hover:shadow-md transition"
              >
              <div
                class="flex justify-center items-center gap-2 text-white bg-gradient-to-r from-orange-400 to-orange-600 rounded-md px-3 py-1 mb-2"
                >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  viewBox="0 0 24 24"
                  fill="currentColor"
                  class="w-5 h-5"
                >
                  <path
                    fill-rule="evenodd"
                    d="m11.54 22.351.07.04.028.016a.76.76 0 0 0 .723 0l.028-.015.071-.041a16.975 16.975 0 0 0 1.144-.742 19.58 19.58 0 0 0 2.683-2.282c1.944-1.99 3.963-4.98 3.963-8.827a8.25 8.25 0 0 0-16.5 0c0 3.846 2.02 6.837 3.963 8.827a19.58 19.58 0 0 0 2.682 2.282 16.975 16.975 0 0 0 1.145.742ZM12 13.5a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"
                    clip-rule="evenodd"
                  />
                </svg>
                <span class="font-medium">Location</span>
              </div>

              <div class="text-center font-medium text-gray-700">{{events.location}}</div>
            </div>
            
            <!-- Edit + Delate -->
            <div class=" col-span-2 flex justify-center items-center m-5 gap-3">
              <a
                href="{% url 'edit_event' events.id %}"
                class="block px-4 py-1 text-lg font-bold text-white bg-yellow-500 hover:bg-yellow-400 rounded-md"
              >
                Edit
              </a>
              <form method="POST" action="{% url 'delete_event' events.id %}" onsubmit="return confirm('Are you sure you want to delete this Event?');" style="display:inline;">
                {% csrf_token %}
                <button
                  type="submit"
                  class="block px-4 py-1 text-lg font-bold text-white bg-red-500 hover:bg-red-400 rounded-md cursor-pointer"
                >
                  Delete
                </button>
              </form>
            </div>
          </div>
        </div>

        <!-- Right side: add to calendar, participants -->
        <div class="md:col-span-5 my-10 ml-5">
          <div>
            <!-- Participants Header -->
            <div class="flex items-center justify-center gap-5">
              <h3 class="text-lg font-semibold text-gray-800 py-4">
                Participants :
              </h3>
              <div class="bg-blue-400 text-white font-semibold text-md rounded-md px-5 py-1">{{total_participant}}</div>
            </div>

            <ol class="list-decimal list-inside space-y-2 pt-2 text-sm text-gray-700">
              <table class="min-w-full border-collapse border border-gray-300">
                <thead>
                  <tr class="bg-gray-100">
                    <th class="border border-gray-300 px-4 py-2 text-left">Name</th>
                    <th class="border border-gray-300 px-4 py-2 text-left">Email</th>
                  </tr>
                </thead>
                <tbody>
                  {% for participant in events.participants.all %}
                  <tr class="hover:bg-gray-50">
                    <td class="border border-gray-300 px-4 py-2">{{ participant.name }}</td>
                    <td class="border border-gray-300 px-4 py-2">
                      <a href="mailto:{{ participant.email }}" class="underline hover:text-red-500">
                        {{ participant.email }}
                      </a>
                    </td>
                  </tr>
                  {% empty %}
                  <tr>
                    <td colspan="2" class="border border-gray-300 px-4 py-2 text-center text-gray-500">
                      No participants found.
                    </td>
                  </tr>
                  {% endfor %}
                </tbody>
              </table>
            </ol>
          </div>
        </div>
      </div>
    </main>

    {% include "footer.html" %}
  </body>
</html>

